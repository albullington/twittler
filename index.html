<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="stylesheet.css">
  </head>
  <body>
    <header>
      <h1>Welcome to Twittler!</h1>
    </header>
    <section class="grid">
    <script>

      $(document).ready(function(){
        var $body = $('section');
        
        
        var users = streams.users; 
        //console.log(users);
        //streams.users is an object filled with 4 user arrays
        //each array contains a bunch of objects, with keys called user, message, and created_at
        //{user: "douglascalhoun", message: "a seedy old man enjoyed the worm #sxsw", created_at: Wed Feb 28 2018 18:13:31 GMT-0800 (PST)}
        //note: there's no @ symbol
        //console.log(streams.users);

        var displayTweets = function() {

          var lastTweetAdded = streams.home.length - 1;
          var lastTweetPosted = $('section').children().length - 1;

          while(lastTweetAdded > lastTweetPosted){
            var tweet = streams.home[lastTweetAdded];
            var $tweet = $('<div id="allTweets"></div>');
            var $user = $('<span></span>');
            $user.addClass(tweet.user);
            $user.text('@' + tweet.user);
            $user.on('click', function(e) {
              $(this).addClass('filteredTweet');
              console.log(e);
              clearInterval(checkForTweets);
              $('span').parent().addClass('hidden');
              $('span').filter('e.target.className').addClass('show');
              });
              //checkForTweets();
            $tweet.text(': ' + tweet.message + ' -- ' + tweet.created_at);
            $user.prependTo($tweet);
            $tweet.prependTo($body);
            lastTweetAdded -= 1;   
          }         
        }

        var checkForTweets = setInterval(function() {
          displayTweets();
        }, 2000);

        var stopCheckingForTweets = function() {
          clearInterval(checkForTweets);
        }

      });

    </script>
    </section>
  </body>
</html>

